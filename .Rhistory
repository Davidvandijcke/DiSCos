plotName=agg, ylim=ylim, xlim=xlim, xlab="Y", ylab="CDF Change", t_plot=t_plot)
CI <- TRUE
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, savePlots=savePlots,
plotName=agg, ylim=ylim, xlim=xlim, xlab="Y", ylab="CDF Change", t_plot=t_plot)
ci_lower
ci_upper
ci_lower[[1]] == ci_upper[[1]]
cl
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdfDiff")
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, savePlots=savePlots,
plotName=agg, ylim=ylim, xlim=xlim, xlab="Y", ylab="CDF Change", t_plot=t_plot)
p
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdfDiff")
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, savePlots=savePlots,
plotName=agg, ylim=ylim, xlim=xlim, xlab="Y", ylab="CDF Change", t_plot=t_plot)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdf")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdf")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdf")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdf")
discot <- DiSCoTEA(disco, agg="cdf")
target_cdf
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdf")
devtools::load_all()
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=2)
discot <- DiSCoTEA(disco, agg="cdf")
devtools::load_all()
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=2)
discot <- DiSCoTEA(disco, agg="cdf")
treats <- list()
treats_boot <- list()
target_cdf <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
grid <- disco$results.periods[[i]]$target$grid
treats[[i]]  <- stats::ecdf(disco$results.periods[[i]]$DiSCo$quantile)(grid)
target_cdf[[i]] <- stats::ecdf(disco$results.periods[[i]]$target$quantile)(grid)
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$cdf[,x,] ) # need to grab from the bootmat
}
if (CI){
sds <- lapply(1:T_max, function(t) disco$CI$cdf$sd[,t])
ci_lower <- lapply(1:T_max, function(t) disco$CI$cdf$lower[,t])
ci_upper <- lapply(1:T_max, function(t) disco$CI$cdf$upper[,t])
} else {
sds <- NA
ci_lower <- NA
ci_upper <- NA
}
devtools::load_all()
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=2)
discot <- DiSCoTEA(disco, agg="cdf")
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=2)
discot <- DiSCoTEA(disco, agg="cdf", graph=TRUE)
devtools::load_all()
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=2)
discot <- DiSCoTEA(disco, agg="cdf", graph=TRUE)
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=100,num.cores=5)
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, savePlots=savePlots,
plotName=agg, ylim=ylim, xlim=xlim, xlab="Y", ylab="CDF Change", t_plot=t_plot)
discot <- DiSCoTEA(disco, agg="cdf", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="cdf", graph=TRUE)
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
treats <- list()
treats_boot <- list()
disco$results.periods[[1]]$DiSCo$quantile
disco$results.periods[[1]]$target$quantile
devtools::load_all()
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
devtools::load_all()
# disco
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=100,num.cores=5)
discot <- DiSCoTEA(disco, agg="cdfDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
treats <- list()
treats_boot <- list()
disco$results.periods[[1]]$DiSCo$quantile
treats <- list()
treats_boot <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
c_qtile <- disco$results.periods[[i]]$DiSCo$quantile
t_qtile <- disco$results.periods[[i]]$target$quantile
treats[[i]] <- t_qtile - c_qtile
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$quantile_diff[,x,] ) # need to grab from the bootmat
}
if (CI){
sds <- lapply(1:T_max, function(t) disco$CI$cdf_diff$sd[,t])
ci_lower <- lapply(1:T_max, function(t) disco$CI$quantile_diff$lower[,t])
ci_upper <- lapply(1:T_max, function(t) disco$CI$quantile_diff$upper[,t])
} else {
sds <- NA
ci_lower <- NA
ci_upper <- NA
}
if (graph) {
if (is.null(ylim)) {
ymin <- quantile(unlist(treats), 0.01)
ymax <- quantile(unlist(treats), 0.99)
ylim <- c(ymin, ymax)
}
if (is.null(xlim)) {
xmin <- min(unlist(evgrid))
xmax <- max(unlist(evgrid))
xlim <- c(xmin, xmax)
}
}
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, savePlots=savePlots,
plotName=agg, ylim=ylim, xlim=xlim, xlab="Y", ylab="CDF Change", t_plot=t_plot)
trats
treats
treats <- list()
treats_boot <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
c_qtile <- disco$results.periods[[i]]$DiSCo$quantile
t_qtile <- disco$results.periods[[i]]$target$quantile
treats[[i]] <- t_qtile - c_qtile
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$quantile_diff[,x,] ) # need to grab from the bootmat
}
if (CI){
sds <- lapply(1:T_max, function(t) disco$CI$cdf_diff$sd[,t])
ci_lower <- lapply(1:T_max, function(t) disco$CI$quantile_diff$lower[,t])
ci_upper <- lapply(1:T_max, function(t) disco$CI$quantile_diff$upper[,t])
} else {
sds <- NA
ci_lower <- NA
ci_upper <- NA
}
if (graph) {
if (is.null(ylim)) {
ymin <- quantile(unlist(treats), 0.01)
ymax <- quantile(unlist(treats), 0.99)
ylim <- c(ymin, ymax)
}
if (is.null(xlim)) {
xmin <- min(unlist(evgrid))
xmax <- max(unlist(evgrid))
xlim <- c(xmin, xmax)
}
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
treats <- list()
treats_boot <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
c_qtile <- disco$results.periods[[i]]$DiSCo$quantile
t_qtile <- disco$results.periods[[i]]$target$quantile
treats[[i]] <- t_qtile - c_qtile
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$quantile_diff[,x,] ) # need to grab from the bootmat
}
if (CI){
sds <- lapply(1:T_max, function(t) disco$CI$cdf_diff$sd[,t])
ci_lower <- lapply(1:T_max, function(t) disco$CI$quantile_diff$lower[,t])
ci_upper <- lapply(1:T_max, function(t) disco$CI$quantile_diff$upper[,t])
} else {
sds <- NA
ci_lower <- NA
ci_upper <- NA
}
if (graph) {
if (is.null(ylim)) {
ymin <- quantile(unlist(treats), 0.01)
ymax <- quantile(unlist(treats), 0.99)
ylim <- c(ymin, ymax)
}
if (is.null(xlim)) {
xmin <- min(unlist(evgrid))
xmax <- max(unlist(evgrid))
xlim <- c(xmin, xmax)
}
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, ylim=ylim,
xlab="Quantile", ylab="Treatment Effect", cdf=FALSE, savePlots=savePlots, plotName=agg, t_plot=t_plot)
}
p
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff", graph=TRUE)
devtools::load_all()
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=50, num.cores=5)
discot <- DiSCoTEA(disco, agg="quantileDiff")
treats <- list()
treats_boot <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
c_qtile <- disco$results.periods[[i]]$DiSCo$quantile
t_qtile <- disco$results.periods[[i]]$target$quantile
treats[[i]] <- t_qtile - c_qtile
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$quantile_diff[,x,] ) # need to grab from the bootmat
}
if (CI){
sds <- lapply(1:T_max, function(t) disco$CI$cdf_diff$sd[,t])
ci_lower <- lapply(1:T_max, function(t) disco$CI$quantile_diff$lower[,t])
ci_upper <- lapply(1:T_max, function(t) disco$CI$quantile_diff$upper[,t])
} else {
sds <- NA
ci_lower <- NA
ci_upper <- NA
}
if (graph) {
if (is.null(ylim)) {
ymin <- quantile(unlist(treats), 0.01)
ymax <- quantile(unlist(treats), 0.99)
ylim <- c(ymin, ymax)
}
if (is.null(xlim)) {
xmin <- min(unlist(evgrid))
xmax <- max(unlist(evgrid))
xlim <- c(xmin, xmax)
}
p <- plotDistOverTime(treats, grid, t_start, t_max, CI, ci_lower, ci_upper, ylim=ylim,
xlab="Quantile", ylab="Treatment Effect", cdf=FALSE, savePlots=savePlots, plotName=agg, t_plot=t_plot)
}
[]
p
treats <- list()
treats_boot <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
c_qtile <- disco$results.periods[[i]]$DiSCo$quantile
t_qtile <- disco$results.periods[[i]]$target$quantile
treats[[i]] <- t_qtile - c_qtile
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$quantile_diff[,x,] ) # need to grab from the bootmat
}
if (CI){
sds <- lapply(1:T_max, function(t) disco$CI$cdf_diff$sd[,t])
ci_lower <- lapply(1:T_max, function(t) disco$CI$quantile_diff$lower[,t])
ci_upper <- lapply(1:T_max, function(t) disco$CI$quantile_diff$upper[,t])
} else {
sds <- NA
ci_lower <- NA
ci_upper <- NA
}
ci_upper
treats <- list()
treats_boot <- list()
# get treatment effects
for (i in 1:length(disco$results.periods)) { # TODO: left off here
c_qtile <- disco$results.periods[[i]]$DiSCo$quantile
t_qtile <- disco$results.periods[[i]]$target$quantile
treats[[i]] <- t_qtile - c_qtile
treats_boot[[i]] <- lapply(1:T_max, function(x) disco$CI$bootmat$quantile_diff[,x,] ) # need to grab from the bootmat
}
disco$results.periods[[1]]$DiSCo$quantile
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
agg<-"quantile"
disco$CI[[agg]]$sd
disco$CI[["quantile"]]
disco$CI[[agg]]
discot <- DiSCoTEA(disco, agg="quantileDiff")
discot <- DiSCoTEA(disco, agg="quantile")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantile")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantile")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
treats_agg <- mean(treats[[i]][f:t])
treats_agg
dim(treats_boot)
treats_boot
treats_boot[[i]]
dim(treats_boot[[i]])
treats_boot[[i]]
length(treats_boot)
length(treats_boot[[i]])
Ts <- 2
t0 <- 2
df <- ex_gmm(Ts=Ts,  num.con=4)
disco <- DiSCo(df=df, id_col.target=1, t0=t0, seed=1, CI=TRUE, boots=50, num.cores=5)
discot <- DiSCoTEA(disco, agg="quantileDiff")
treats_boot
length(treats_boot)
length(treats_boot[[i]])
dim(disco$CI$bootmat$quantile_diff)
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
treats_boot
dim(treats_boot)
dim(treats_boot[[i]])
treats_boot_agg <- apply(treats_boot[[i]][f:t,], 2, mean)
treats_boot_agg
dim(treats_boot_agg)
discot <- DiSCoTEA(disco, agg="quantileDiff")
devtools::load_all()
discot <- DiSCoTEA(disco, agg="quantileDiff")
summary(discot)
discot <- DiSCoTEA(disco, agg="cdfDiff")
summary(discot)
devtools::test)
devtools::test()
devtools::load_all()
rlang::last_trace()
devtools::load_all()
devtools::test()
devtools::test()
devtools::load_all()
devtools::test()
devtools::load_all()
devtools::test()
devtools::document()
devtools::load_all()
devtools::document()
devtools::document()
?DiSCos
?DiSCo
devtools::document()
# CI without replacement
expect_no_error(disco <- DiSCo(df=df, id_col.target=1, t0=t0, CI=TRUE, replacement=FALSE, boots=2, seed=1))
devtools::load_all()
expect_no_error(disco <- DiSCo(df=df, id_col.target=1, t0=t0, CI=TRUE, replace=FALSE, boots=2, seed=1))
devtools::test()
devtools::load_all()
devtools::test()
# CI without replacement
expect_no_error(disco <- DiSCo(df=df, id_col.target=1, t0=t0, CI=TRUE, replace=FALSE, boots=2, seed=1))
is.null(disco$CI$quantile
)
# CI FALSE
expect_no_error(disco <- DiSCo(df=df, id_col.target=1, t0=t0, CI=FALSE, seed=1))
disco$CI$quantile
expect_true(is.null(disco$CI$quantile))
# cl = 0
expect_no_error(disco <- DiSCo(df=df, id_col.target=1, t0=t0, cl=0, seed=1, CI=TRUE, num.cores=1, boot=2))
disco$CI$quantile$lower
disco$CI$quantile$lower == disco$CI$quantile$upper
expect_true(all(disco$CI$quantile$lower == disco$CI$quantile$upper))
devtools::test()
devtools::load_all()
devtools::test()
devtools::document()
?DiSCo
devtools::build()
?DiSCo
devtools::document()
?DiSCo
devtools::document()
?DiSCo
devtools::document()
?DiSCo
devtools::document()
?DiSCo
devtools::document()
devtools::build()
library(DiSCos)
?DiSCo
devtools::check()
devtools::install()
library(DiSCos)
?DiSCo
devtools::document()
devtools::load_all()
?DiSCo
devtools::document()
devtools::load_all()
?DiSCo
devtools::document()
?DiSCo
devtools::document()
?DiSCo
devtools::load_all()
?DiSCo
devtools::document()
devtools::load_all()
?DiSCo
devtools::install()
?DiSCo
?DiSCo
library(DiSCo)
?DiSCo
devtools::install()
?DiSCo
?DiSCo
devtools::document()
?DiSCo
devtools::install)()
devtools::install()
?DiSCo
?DiSCo
uninstall.packages("DiSCo")
remove("DiSCo")
remove.packages("DiSCo")
?DiSCo
devtools::document()
?DiSCo
devtools::install()
?DiSCo
?DiSCos
?DiSCo
devtools::document()
roxygen2::roxygenise(
)
?DiSCos
?DiSCo
devtools::document()
devtools::install()
?DiSCo
?DiSCo
devtools::build()
?DiSCo
devtools::document()
?DiSCo
devtools::install()
?DiSCo
devtools::document()
roxygen2::roxygenize()
?DiSCo
devtools::install()
.Last.error
devtools::load_all()
devtools::document()
roxygen2::roxygenize)
roxygen2::roxygenize()
?DiSCo
devtools::install()
devtools::document()
devtools::install()
?DiSCo
?DiSco
?DiSCo
devtools::document()
?DiSCo
devtools::build()
?DiSCo
devtools::install()
?DiSCo
devtools::load_all()
?DiSCo
library(DiSCos)
?DiSCo
?DiSCo
devtools::document()
devtools::install()
?DiSCo
?DiSCo
devtools::document(0)
devtools::document()
?devtools::install()
devtools::install()
