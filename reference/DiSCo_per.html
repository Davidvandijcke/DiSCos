<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>DiSCo_per — DiSCo_per • DiSCos</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="DiSCo_per — DiSCo_per"><meta name="description" content="Function to implement permutation test for Distributional Synthetic Controls"><meta property="og:description" content="Function to implement permutation test for Distributional Synthetic Controls"><meta property="og:image" content="http://www.davidvandijcke.com/DiSCo/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">DiSCos</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Dube2019.html">Empirical Application in Gunsilius (2023)</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Davidvandijcke/DiSCos/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>DiSCo_per</h1>
      <small class="dont-index">Source: <a href="https://github.com/Davidvandijcke/DiSCos/blob/main/R/DiSCo_per.R" class="external-link"><code>R/DiSCo_per.R</code></a></small>
      <div class="d-none name"><code>DiSCo_per.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function to implement permutation test for Distributional Synthetic Controls</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">DiSCo_per</span><span class="op">(</span></span>
<span>  <span class="va">results.periods</span>,</span>
<span>  <span class="va">T0</span>,</span>
<span>  ww <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  peridx <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  evgrid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">101</span><span class="op">)</span>,</span>
<span>  graph <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  num.cores <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qmethod <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  qtype <span class="op">=</span> <span class="va">qtype</span>,</span>
<span>  q_min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  q_max <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  M <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  simplex <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  mixture <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-results-periods">results.periods<a class="anchor" aria-label="anchor" href="#arg-results-periods"></a></dt>
<dd><p>List of period-specific results from DiSCo</p></dd>


<dt id="arg-t-">T0<a class="anchor" aria-label="anchor" href="#arg-t-"></a></dt>
<dd><p>Integer indicating first year of treatment as counted from 1 (e.g, if treatment year 2002 was the 5th year in the sample, this parameter should be 5).</p></dd>


<dt id="arg-ww">ww<a class="anchor" aria-label="anchor" href="#arg-ww"></a></dt>
<dd><p>Optional vector of weights indicating the relative importance of each time period. If not specified, each time period is weighted equally.</p></dd>


<dt id="arg-peridx">peridx<a class="anchor" aria-label="anchor" href="#arg-peridx"></a></dt>
<dd><p>Optional integer indicating number of permutations. If not specified, by default equal to the number of units in the sample.</p></dd>


<dt id="arg-graph">graph<a class="anchor" aria-label="anchor" href="#arg-graph"></a></dt>
<dd><p>Logical, indicating whether to plot the permutation graph as in Figure 3 of the paper. Default is FALSE.</p></dd>


<dt id="arg-num-cores">num.cores<a class="anchor" aria-label="anchor" href="#arg-num-cores"></a></dt>
<dd><p>Integer, number of cores to use for parallel computation. Default is 1. If the <code>permutation</code> or <code>CI</code> arguments are set to TRUE, this can be slow and it is recommended to set this to 4 or more, if possible.
If you get an error in "all cores" or similar, try setting num.cores=1 to see the precise error value.</p></dd>


<dt id="arg-weights">weights<a class="anchor" aria-label="anchor" href="#arg-weights"></a></dt>
<dd><p>Optional vector of weights to use for the "true" treated unit. <code>redo_weights</code> has to be set to FALSE for these weights to be used.</p></dd>


<dt id="arg-qmethod">qmethod<a class="anchor" aria-label="anchor" href="#arg-qmethod"></a></dt>
<dd><p>Character, indicating the method to use for computing the quantiles of the target distribution. The default is NULL, which uses the <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></code> function from the stats package.
Other options are "<code><a href="https://rdrr.io/pkg/evmix/man/kden.html" class="external-link">qkden</a></code>" (based on smoothed kernel density function) and "<code><a href="https://rdrr.io/pkg/extremeStat/man/distLquantile.html" class="external-link">extreme</a></code>" (based on parametric extreme value distributions).
Both are substantially slower than the default method but may be useful for fat-tailed distributions with few data points at the upper quantiles. Alternatively, one could use the q_max option to restrict the range of quantiles used.</p></dd>


<dt id="arg-qtype">qtype<a class="anchor" aria-label="anchor" href="#arg-qtype"></a></dt>
<dd><p>Integer, indicating the type of quantile to compute when using  <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></code> in the <code>qmethod</code> argument.
The default 7. See the documentation for the <code><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></code> function for more information.</p></dd>


<dt id="arg-q-min">q_min<a class="anchor" aria-label="anchor" href="#arg-q-min"></a></dt>
<dd><p>Numeric, minimum quantile to use. Set this together with <code>q_max</code> to restrict the range of quantiles used to construct the synthetic control.
Default is 0 (all quantiles). Currently NOT implemented for the <code>mixture</code> approach.</p></dd>


<dt id="arg-q-max">q_max<a class="anchor" aria-label="anchor" href="#arg-q-max"></a></dt>
<dd><p>Numeric, maximum quantile to use. Set this together with <code>q_min</code> to restrict the range of quantiles used to construct the synthetic control.
Default is 1 (all quantiles). Currently NOT implemented for the <code>mixture</code> approach.</p></dd>


<dt id="arg-m">M<a class="anchor" aria-label="anchor" href="#arg-m"></a></dt>
<dd><p>Integer indicating the number of control quantiles to use in the DiSCo method. Default is 1000.</p></dd>


<dt id="arg-simplex">simplex<a class="anchor" aria-label="anchor" href="#arg-simplex"></a></dt>
<dd><p>Logical, indicating whether to use to constrain the optimal weights to the unit simplex. Default is FALSE, which only constrains the weights to sum up to 1 but allows them to be negative.</p></dd>


<dt id="arg-mixture">mixture<a class="anchor" aria-label="anchor" href="#arg-mixture"></a></dt>
<dd><p>Logical, indicating whether to use the mixture of distributions approach instead.
See Section 4.3. in gunsilius2023distributional;textualDiSCos. This approach minimizes the distance between the CDFs
instead of the quantile functions, and is preferred for categorical variables. When working with such variables, one should
also provide a list of support points in the <code>grid.cat</code> parameter. When that is provided, this parameter is automatically set to TRUE. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>List of matrices containing synthetic time path of the outcome variable
for the target unit together with the time paths of the control units</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This program iterates through all units and computes the optimal weights on the other units
for replicating the unit of iteration's outcome variable, assuming that it is the treated unit.
See Algorithm 1 in gunsilius2023distributional;textualDiSCos for more details. The only modification is that we take the ratio of post- and pre-treatment
root mean squared Wasserstein distances to calculate the p-value, rather than the level in each period, following @abadie2010synthetic.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by David Van Dijcke, Florian Gunsilius, Siyun He.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

